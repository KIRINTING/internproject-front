<div class="dashboard-container">
    <div class="page-header">
        <h1 class="page-title">Dashboard</h1>
        <div class="page-subtitle">Overview of internship requests and status.</div>
    </div>

    <!-- Stat Widgets -->
    <div class="stats-grid">
        <div class="small-box bg-info">
            <div class="inner">
                <h3>{{ stats.total }}</h3>
                <p>Total Requests</p>
            </div>
            <div class="icon">
                <i class="pi pi-folder"></i>
            </div>
            <a routerLink="/officer/requests" class="small-box-footer">More info <i
                    class="pi pi-arrow-circle-right"></i></a>
        </div>

        <div class="small-box bg-warning">
            <div class="inner">
                <h3>{{ stats.pending }}</h3>
                <p>Pending Review</p>
            </div>
            <div class="icon">
                <i class="pi pi-clock"></i>
            </div>
            <a routerLink="/officer/requests" [queryParams]="{status: 'pending'}" class="small-box-footer">More info <i
                    class="pi pi-arrow-circle-right"></i></a>
        </div>

        <div class="small-box bg-success">
            <div class="inner">
                <h3>{{ stats.approved }}</h3>
                <p>Approved</p>
            </div>
            <div class="icon">
                <i class="pi pi-check-circle"></i>
            </div>
            <a routerLink="/officer/requests" [queryParams]="{status: 'approved'}" class="small-box-footer">More info <i
                    class="pi pi-arrow-circle-right"></i></a>
        </div>

        <div class="small-box bg-danger">
            <div class="inner">
                <h3>{{ stats.rejected }}</h3>
                <p>Rejected</p>
            </div>
            <div class="icon">
                <i class="pi pi-times-circle"></i>
            </div>
            <a routerLink="/officer/requests" [queryParams]="{status: 'rejected'}" class="small-box-footer">More info <i
                    class="pi pi-arrow-circle-right"></i></a>
        </div>
    </div>

    <!-- Recent Activity Section -->
    <div class="content-row">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title"><i class="pi pi-list mr-2"></i> Recent Requests</h3>
                <div class="card-tools">
                    <a routerLink="/officer/requests" class="btn-tool">View All</a>
                </div>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Student</th>
                                <th>Company</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th style="width: 100px;">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let req of recentRequests">
                                <td>
                                    <div class="font-bold">{{ req.first_name }} {{ req.last_name }}</div>
                                    <small class="text-muted">{{ req.student_code }}</small>
                                </td>
                                <td>{{ req.company_name }}<br><small class="text-muted">{{ req.position }}</small></td>
                                <td>{{ req.created_at | date:'dd MMM yyyy' }}</td>
                                <td>
                                    <span class="badge" [ngClass]="getStatusBadgeClass(req.status)">
                                        {{ getStatusLabel(req.status) }}
                                    </span>
                                </td>
                                <td>
                                    <a [routerLink]="['/officer/requests', req.id]"
                                        class="btn btn-sm btn-outline">View</a>
                                </td>
                            </tr>
                            <tr *ngIf="recentRequests.length === 0">
                                <td colspan="5" class="text-center p-4 text-muted">No recent requests found.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>